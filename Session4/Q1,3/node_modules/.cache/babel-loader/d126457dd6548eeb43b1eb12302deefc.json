{"ast":null,"code":"var _jsxFileName = \"/home/shubham/Documents/assignments/Node/Session4/Q1,3/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Users from './components/Users/Users';\nimport AddUser from './components/addUsers/addUser';\nimport { Switch, Route, withRouter, Redirect } from 'react-router-dom';\nimport Login from './components/login/login';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nfunction App(props) {\n  const [sessionId, setSessionId] = useState(null);\n  const [userGit, setUserGit] = useState(\"\");\n  useEffect(() => {\n    let sessionid = sessionStorage.getItem(\"sessionId\");\n    let expire = sessionStorage.getItem(\"expire\");\n    console.log(sessionid);\n\n    if (!sessionid) {\n      setSessionId(null);\n    } else {\n      if (parseInt(expire) < Date.now()) setSessionId(null);else setSessionId({\n        sessionid: sessionid,\n        expire: expire\n      });\n    }\n  }, []);\n\n  const authHandler = event => {\n    event.preventDefault();\n    const username = event.target[0].value;\n    console.log(username);\n    axios.post('http://localhost:5000/session').then(res => {\n      console.log(res.data);\n      setSessionId(res.data);\n      sessionStorage.setItem(\"sessionId\", res.data.sessionid);\n      sessionStorage.setItem(\"expire\", res.data.expire);\n      props.history.push('/');\n    });\n    axios.get('http://localhost:5000/github/' + username).then(response => {\n      console.log(response.data);\n      setUserGit(\"user git is: \" + response.data);\n    });\n  };\n\n  let route = /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: () => /*#__PURE__*/React.createElement(Users, {\n      sessionId: sessionId.sessionid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 44\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/addusers\",\n    component: () => /*#__PURE__*/React.createElement(AddUser, {\n      sessionId: sessionId.sessionid,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 46\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/login\",\n    component: () => /*#__PURE__*/React.createElement(Login, {\n      login: authHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 43\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }));\n\n  if (sessionId == null) {\n    route = /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      component: () => /*#__PURE__*/React.createElement(Login, {\n        login: authHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 45\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 19\n    }\n  }, \"Users\")), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/addusers\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }\n  }, \"Add Users\")), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }\n  }, \"Login\")), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:5000/aboutus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }, \"About Us\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"usergit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, userGit), route);\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/home/shubham/Documents/assignments/Node/Session4/Q1,3/src/App.js"],"names":["React","useState","useEffect","Users","AddUser","Switch","Route","withRouter","Redirect","Login","axios","Link","App","props","sessionId","setSessionId","userGit","setUserGit","sessionid","sessionStorage","getItem","expire","console","log","parseInt","Date","now","authHandler","event","preventDefault","username","target","value","post","then","res","data","setItem","history","push","get","response","route"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport Users from './components/Users/Users';\nimport AddUser from './components/addUsers/addUser';\nimport { Switch, Route, withRouter, Redirect } from 'react-router-dom';\nimport Login from './components/login/login';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\nfunction App(props) {\n  const [sessionId, setSessionId] = useState(null)\n  const [userGit, setUserGit] = useState(\"\");\n\n  useEffect(() => {\n    let sessionid = sessionStorage.getItem(\"sessionId\")\n    let expire = sessionStorage.getItem(\"expire\")\n    console.log(sessionid);\n    if (!sessionid) {\n      setSessionId(null)\n    }\n    else {\n      if (parseInt(expire) < Date.now())\n        setSessionId(null)\n      else\n        setSessionId({ sessionid: sessionid, expire: expire });\n    }\n\n  }, [])\n\n\n  const authHandler = (event) => {\n    event.preventDefault()\n    const username = event.target[0].value;\n    console.log(username)\n    axios.post('http://localhost:5000/session')\n      .then(res => {\n        console.log(res.data)\n        setSessionId(res.data);\n        sessionStorage.setItem(\"sessionId\", res.data.sessionid)\n        sessionStorage.setItem(\"expire\", res.data.expire)\n        props.history.push('/')\n      })\n    axios.get('http://localhost:5000/github/' + username)\n      .then(response => {\n        console.log(response.data)\n        setUserGit(\"user git is: \" + response.data);\n      })\n  }\n\n\n\n  let route = (<Switch>\n    <Route exact path='/' component={() => <Users sessionId={sessionId.sessionid} />} />\n    <Route path='/addusers' component={() => <AddUser sessionId={sessionId.sessionid} />} />\n    <Route path='/login' component={() => <Login login={authHandler} />} />\n  </Switch>)\n\n\n  if (sessionId == null) {\n\n    route = (<Switch>\n      <Route path='/login' component={() => <Login login={authHandler} />} />\n      <Redirect to=\"/login\" />\n    </Switch>)\n\n  }\n  return (\n    <div>\n      <div>\n      <div className =\"link\">\n            <span><Link to=\"/\">Users</Link></span>\n            <span><Link to=\"/addusers\">Add Users</Link></span>\n            <span><Link to ='/login'>Login</Link></span>\n            <span><a href=\"http://localhost:5000/aboutus\">About Us</a></span>\n      </div>\n    </div>\n      <div className=\"usergit\">{userGit}</div>\n      {route}\n    </div>)\n}\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}